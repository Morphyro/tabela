<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela Peri√≥dica Interativa</title>
    
    <!-- Estilos do Google Arts 3D Periodic Table -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/tachyons/4.12.0/tachyons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Three.js para visualiza√ß√£o 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    
    <style>
        /* Estilos baseados no 3D Periodic Table */
        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            background: #fff;
            color: #000;
            overflow-x: hidden;
        }
        
        .main-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header-container {
            position: absolute;
            top: 0;
            background: white;
            color: black;
            width: 100%;
            height: 70.4px;
            padding: 0 13.2px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header-container h1 {
            margin: 0;
            font-size: 1.65rem;
            font-weight: 500;
        }
        
        .content-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            margin-top: 70.4px;
        }
        
        .table-container {
            width: calc(100% - 352px);
            height: 100%;
            position: relative;
            overflow: auto;
            background: #f8f9fa;
            margin-left: 352px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.25s ease-in-out;
        }
        
        .table-container.sidebar-right {
            margin-left: 0;
            margin-right: 352px;
        }
        
        .table {
            padding: 6.6px;
            padding-bottom: 110px;
            min-width: 880px;
            display: grid;
            grid-template-columns: 33px repeat(18, 61.6px);
            grid-template-rows: 24.2px repeat(9, 61.6px);
            gap: 1.65px;
            margin: 0 auto;
            transform-origin: center center;
            transition: transform 0.1s ease-out;
            box-sizing: border-box;
            width: fit-content;
        }
        
        .element {
            width: 61.6px;
            height: 61.6px;
            border: 1px solid #ccc;
            border-radius: 3.3px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: clamp(0.44rem, 0.99vw, 0.715rem);
            font-weight: bold;
            text-align: center;
            position: relative;
            overflow: hidden;
            background: #fff;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
            box-sizing: border-box;
            color: #222;
        }
        
        .element .number {
            font-size: clamp(0.4125rem, 0.825vw, 0.6875rem);
            position: absolute;
            top: 1.1px;
            left: 2.2px;
            color: #1f1f1f;
        }
        
        .element .symbol {
            font-size: clamp(0.6875rem, 1.5125vw, 1.03125rem);
            font-weight: bold;
            margin: 1.1px 0;
            color: #222;
            line-height: 1;
        }
        
        .element .name {
            font-size: clamp(0.34375rem, 0.6875vw, 0.55rem);
            color: #353535;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            width: calc(100% - 4.4px);
            margin-bottom: 1.1px;
            line-height: 1;
        }
        
        .element .mass {
            font-size: clamp(0.34375rem, 0.6875vw, 0.55rem);
            color: #1f1f1f;
            position: absolute;
            bottom: 1.1px;
            right: 2.2px;
            line-height: 1;
        }
        
        .empty-space {
            background: transparent;
            border: none;
            cursor: default;
        }
        
        .group-label, .period-label {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 0.6rem;
            font-weight: bold;
            color: #2c3e50;
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
            border: 1px solid #95a5a6;
            border-radius: 4px;
            text-align: center;
            line-height: 1.1;
        }
        
        .group-label {
            width: 61.6px;
            height: 24.2px;
            margin-top: -3px;
        }
        
        .period-label {
            width: 33px;
            height: 61.6px;
            margin-left: -3px;
        }
        
        .group-label .old-notation {
            font-size: 0.44rem;
            color: #7f8c8d;
            margin-top: 0px;
        }
        
        .period-label .period-number {
            font-size: 0.715rem;
            color: #2c3e50;
        }
        
        .element:hover {
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .element.highlight {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Cores por categoria otimizadas */
        .alkali-metal {
            background-color: #f1b200;
        }
        
        .alkaline-earth-metal {
            background-color: #eada00;
        }
        
        .transition-metal {
            background-color: #eb8e8e;
        }
        
        .post-transition-metal {
            background-color: #a2c7d3;
        }
        
        .metalloid {
            background-color: #4db6ac;
        }
        
        .nonmetal {
            background-color: #a1d344;
        }
        
        .halogen {
            background-color: #70cbeb;
        }
        
        .noble-gas {
            background-color: #74b9ff;
        }
        
        .lanthanide {
            background-color: #90e3e9;
        }
        
        .actinide {
            background-color: #dcadd6;
        }
        
        .lanthanide-indicator {
            background: linear-gradient(135deg, #90e3e9, #74b9ff) !important;
            border: 2px dashed #2c3e50 !important;
            animation: indicatorPulse 2s infinite;
        }
        
        .actinide-indicator {
            background: linear-gradient(135deg, #dcadd6, #a29bfe) !important;
            border: 2px dashed #2c3e50 !important;
            animation: indicatorPulse 2s infinite;
        }
        
        @keyframes indicatorPulse {
            0% { box-shadow: 0 0 0 0 rgba(44, 62, 80, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(44, 62, 80, 0.1); }
            100% { box-shadow: 0 0 0 0 rgba(44, 62, 80, 0.4); }
        }
        
        .sidebar {
            position: absolute;
            left: 0;
            top: 0;
            width: 352px;
            height: 100%;
            background: white;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
            z-index: 50;
            transform: translateX(0);
            transition: all 0.25s ease-in-out;
        }
        
        .sidebar.collapsed {
            transform: translateX(-100%);
        }
        
        .sidebar.right-position {
            left: auto;
            right: 0;
            border-right: none;
            border-left: 1px solid #e0e0e0;
        }
        
        .sidebar.right-position.collapsed {
            transform: translateX(100%);
        }
        
        .sidebar-header {
            height: 70.4px;
            padding: 0 22px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .sidebar-content {
            padding: 22px;
        }
        
        .sidebar-element {
            width: 120px;
            height: 120px;
            border: 2px solid #ccc;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            text-align: center;
            position: relative;
            overflow: hidden;
            background: #fff;
            margin: 0 auto 22px auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }
        
        .sidebar-element:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        
        .sidebar-element .element-number {
            font-size: 0.8rem;
            position: absolute;
            top: 4px;
            left: 6px;
            color: #1f1f1f;
            font-weight: bold;
        }
        
        .sidebar-element .element-symbol {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 8px 0;
            color: #222;
            line-height: 1;
        }
        
        .sidebar-element .element-name {
            font-size: 0.7rem;
            color: #353535;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            width: calc(100% - 12px);
            margin-bottom: 4px;
            line-height: 1;
            font-weight: 500;
        }
        
        .sidebar-element .element-mass {
            font-size: 0.65rem;
            color: #1f1f1f;
            position: absolute;
            bottom: 4px;
            right: 6px;
            line-height: 1;
            font-weight: bold;
        }
        
        .category-info {
            display: flex;
            align-items: center;
            margin: 22px 0;
        }
        
        .color-dot {
            width: 17.6px;
            height: 17.6px;
            border-radius: 50%;
            margin-right: 11px;
        }
        
        .visualization-container {
            width: 100%;
            height: 330px;
            margin: 22px 0;
            border: 1px solid #e0e0e0;
            border-radius: 8.8px;
            position: relative;
            background: #f8f9fa;
        }
        
        #atom-container-2d {
            width: 100%;
            height: 100%;
            background: #f8fafc;
            border-radius: 8.8px;
            position: relative;
            overflow: hidden;
        }
        
        .visualization-tabs {
            display: flex;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .tab-button {
            flex: 1;
            padding: 11px;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            font-size: 15.4px;
            transition: background 0.2s;
        }
        
        .tab-button.active {
            background: white;
            border-bottom: 2px solid #0060F0;
        }
        
        .tab-content {
            display: none;
            height: calc(100% - 44px);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .properties-list {
            list-style: none;
            padding: 0;
            margin: 22px 0;
        }
        
        .properties-list li {
            padding: 8.8px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
        }
        
        .properties-list li:last-child {
            border-bottom: none;
        }
        
        .property-label {
            font-weight: 500;
            color: #333;
        }
        
        .property-value {
            color: #666;
            text-align: right;
        }
        
        .bottom-panel {
            position: absolute;
            bottom: 0;
            left: 352px;
            right: 0;
            height: 70px;
            background: white;
            border-top: 1px solid #e0e0e0;
            padding: 16.5px;
            display: flex;
            flex-direction: column;
            z-index: 40;
            transition: all 0.25s ease-in-out;
        }
        
        .bottom-panel.sidebar-right {
            left: 0;
            right: 352px;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 11px;
            margin-top: 11px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            padding: 5.5px 11px;
            border-radius: 22px;
            font-size: 13.2px;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
        }
        
        .legend-color {
            width: 13.2px;
            height: 13.2px;
            border-radius: 50%;
            margin-right: 6.6px;
        }
        
        .toggle-sidebar {
            position: absolute;
            right: 50px;
            top: 22px;
            background: #0060F0;
            color: white;
            border: none;
            padding: 11px 16.5px;
            border-radius: 22px;
            cursor: pointer;
            font-size: 15.4px;
            z-index: 60;
        }
        
        .close-sidebar {
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
            color: #666;
        }
        
        /* Prompt de orienta√ß√£o */
        #orientation-prompt {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            text-align: center;
        }
        
        .orientation-content {
            max-width: 300px;
            padding: 20px;
        }
        
        .orientation-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: rotate 2s linear infinite;
        }
        
        .orientation-arrow {
            font-size: 3rem;
            margin-top: 20px;
            animation: bounce 1s ease-in-out infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        /* Responsividade - Mobile Small (‚â§480px) */
        @media (max-width: 480px) {
            .header-container {
                height: 60px;
                padding: 0 10px;
            }
            
            .header-container h1 {
                font-size: 1.2rem;
            }
            
            .toggle-sidebar {
                padding: 8px 12px;
                font-size: 12px;
                right: 10px;
                top: 10px;
            }
            
            .content-wrapper {
                margin-top: 60px;
            }
            
            .table {
                grid-template-columns: 20px repeat(18, 35px);
                grid-template-rows: 15px repeat(9, 35px);
                gap: 0.8px;
                padding: 3px;
                padding-bottom: 60px;
            }
            
            .element {
                width: 35px;
                height: 35px;
                font-size: 0.3rem;
            }
            
            .element .number {
                font-size: 0.25rem;
                top: 1px;
                left: 1px;
            }
            
            .element .symbol {
                font-size: 0.4rem;
            }
            
            .element .name {
                font-size: 0.2rem;
            }
            
            .element .mass {
                font-size: 0.2rem;
                bottom: 1px;
                right: 1px;
            }
            
            .group-label {
                width: 35px;
                height: 15px;
                font-size: 0.3rem;
                margin-top: -3px;
            }
            
            .period-label {
                width: 20px;
                height: 35px;
                font-size: 0.3rem;
                margin-left: -3px;
            }
            
            .sidebar {
                width: 100%;
                transform: translateX(100%);
            }
            
            .sidebar.mobile-sidebar {
                transform: translateX(100%);
            }
            
            .sidebar.mobile-sidebar.open {
                transform: translateX(0);
            }
            
            .table-container.mobile-layout {
                width: 100%;
                margin-left: 0;
            }
            
            .bottom-panel.mobile-layout {
                right: 0;
                left: 0;
                height: 50px;
                padding: 10px;
            }
            
            .visualization-container {
                height: 200px;
            }
            
            .sidebar-element {
                width: 80px;
                height: 80px;
            }
            
            .sidebar-element .element-symbol {
                font-size: 1.5rem;
            }
        }
        
        /* Responsividade - Mobile (‚â§768px) */
        @media (max-width: 768px) {
            .header-container {
                height: 65px;
                padding: 0 12px;
            }
            
            .header-container h1 {
                font-size: 1.4rem;
            }
            
            .toggle-sidebar {
                padding: 10px 14px;
                font-size: 13px;
                right: 12px;
                top: 12px;
            }
            
            .content-wrapper {
                margin-top: 65px;
            }
            
            .table {
                grid-template-columns: 25px repeat(18, 45px);
                grid-template-rows: 18px repeat(9, 45px);
                gap: 1px;
                padding: 4px;
                padding-bottom: 70px;
            }
            
            .element {
                width: 45px;
                height: 45px;
                font-size: 0.35rem;
            }
            
            .element .number {
                font-size: 0.3rem;
                top: 1px;
                left: 1.5px;
            }
            
            .element .symbol {
                font-size: 0.5rem;
            }
            
            .element .name {
                font-size: 0.25rem;
            }
            
            .element .mass {
                font-size: 0.25rem;
                bottom: 1px;
                right: 1.5px;
            }
            
            .group-label {
                width: 45px;
                height: 18px;
                font-size: 0.4rem;
                margin-top: -3px;
            }
            
            .period-label {
                width: 25px;
                height: 45px;
                font-size: 0.4rem;
                margin-left: -3px;
            }
            
            .sidebar {
                width: 100%;
                transform: translateX(100%);
            }
            
            .sidebar.mobile-sidebar {
                transform: translateX(100%);
            }
            
            .sidebar.mobile-sidebar.open {
                transform: translateX(0);
            }
            
            .table-container.mobile-layout {
                width: 100%;
                margin-left: 0;
            }
            
            .bottom-panel.mobile-layout {
                right: 0;
                left: 0;
                height: 60px;
                padding: 12px;
            }
            
            .visualization-container {
                height: 250px;
            }
            
            .sidebar-element {
                width: 100px;
                height: 100px;
            }
            
            .sidebar-element .element-symbol {
                font-size: 1.8rem;
            }
        }
        
        /* Responsividade - Tablet (‚â§1024px) */
        @media (max-width: 1024px) and (min-width: 769px) {
            .header-container {
                height: 68px;
                padding: 0 15px;
            }
            
            .header-container h1 {
                font-size: 1.5rem;
            }
            
            .toggle-sidebar {
                padding: 10px 15px;
                font-size: 14px;
                right: 15px;
                top: 15px;
            }
            
            .content-wrapper {
                margin-top: 68px;
            }
            
            .table {
                grid-template-columns: 28px repeat(18, 52px);
                grid-template-rows: 20px repeat(9, 52px);
                gap: 1.2px;
                padding: 5px;
                padding-bottom: 80px;
            }
            
            .element {
                width: 52px;
                height: 52px;
            }
            
            .group-label {
                width: 52px;
                height: 20px;
                margin-top: -3px;
            }
            
            .period-label {
                width: 28px;
                height: 52px;
                margin-left: -3px;
            }
            
            .sidebar {
                width: 320px;
            }
            
            .table-container {
                width: calc(100% - 320px);
            }
            
            .table-container.sidebar-right {
                margin-left: 0;
                margin-right: 320px;
            }
            
            .bottom-panel {
                left: 320px;
            }
            
            .bottom-panel.sidebar-right {
                left: 0;
                right: 320px;
            }
            
            .visualization-container {
                height: 280px;
            }
        }
        
        /* Responsividade - Desktop Small (‚â§1440px) */
        @media (max-width: 1440px) and (min-width: 1025px) {
            .table {
                grid-template-columns: 30px repeat(18, 58px);
                grid-template-rows: 22px repeat(9, 58px);
                gap: 1.4px;
                padding: 5.5px;
                padding-bottom: 95px;
            }
            
            .element {
                width: 58px;
                height: 58px;
            }
            
            .group-label {
                width: 58px;
                height: 22px;
                margin-top: -3px;
            }
            
            .period-label {
                width: 30px;
                height: 58px;
                margin-left: -3px;
            }
        }
        
        /* Landscape espec√≠fico para mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .header-container {
                height: 50px;
            }
            
            .content-wrapper {
                margin-top: 50px;
            }
            
            .table {
                grid-template-columns: 20px repeat(18, 40px);
                grid-template-rows: 15px repeat(9, 40px);
                gap: 0.8px;
                padding: 3px;
                padding-bottom: 50px;
            }
            
            .element {
                width: 40px;
                height: 40px;
            }
            
            .group-label {
                width: 40px;
                height: 15px;
                margin-top: -3px;
            }
            
            .period-label {
                width: 20px;
                height: 40px;
                margin-left: -3px;
            }
            
            .visualization-container {
                height: 180px;
            }
            
            .bottom-panel.mobile-layout {
                height: 45px;
                padding: 8px;
            }
        }
        
        /* Classes espec√≠ficas para dispositivos */
        .mobile-device .sidebar {
            width: 100%;
            z-index: 200;
        }
        
        .mobile-device .table-container {
            width: 100%;
        }
        
        .tablet-device .sidebar {
            width: 300px;
        }
        
        .tablet-device .table-container {
            width: calc(100% - 300px);
        }
        
        /* Melhorias para touch */
        @media (hover: none) and (pointer: coarse) {
            .element:hover {
                transform: none;
            }
            
            .element:active {
                transform: scale(1.05);
            }
            
            .sidebar-element:hover {
                transform: none;
            }
            
            .sidebar-element:active {
                transform: scale(1.05);
            }
        }
        
        /* Anima√ß√µes */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Header -->
        <div class="header-container">
            <h1>Tabela Peri√≥dica Interativa</h1>
            <button class="toggle-sidebar" onclick="toggleSidebar()">‚ÑπÔ∏è Mudar <></button>
        </div>
        
        <!-- Conte√∫do Principal -->
        <div class="content-wrapper">
            <!-- Tabela Peri√≥dica -->
            <div class="table-container">
                <div class="table" id="periodicTable">
                    <!-- A tabela ser√° gerada dinamicamente -->
                </div>
            </div>
            
            <!-- Sidebar de Informa√ß√µes -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h3>Informa√ß√µes do Elemento</h3>
                    <button class="close-sidebar" onclick="toggleSidebar()">√ó</button>
                </div>
                <div class="sidebar-content" id="elementInfo">
                    <div class="element-info">
                        <!-- Elemento visual da sidebar -->
                        <div class="sidebar-element" id="sidebarElement">
                            <div class="element-number" id="sidebarElementNumber">1</div>
                            <div class="element-symbol" id="sidebarElementSymbol">H</div>
                            <div class="element-name" id="sidebarElementName">Hidrog√™nio</div>
                            <div class="element-mass" id="sidebarElementMass">1.008</div>
                        </div>
                        
                        <div class="category-info">
                            <div class="color-dot" id="categoryColor"></div>
                            <span id="categoryName"></span>
                        </div>
                        
                        <!-- Visualiza√ß√µes -->
                        <div class="visualization-container">
                            <div class="visualization-tabs">
                                <button class="tab-button active" onclick="switchTab('2d')">Modelo 2D</button>
                                <button class="tab-button" onclick="switchTab('3d')">Modelo 3D</button>
                            </div>
                            <div class="tab-content active" id="tab2d">
                                <div id="atom-container-2d" style="width: 100%; height: 100%;"></div>
                            </div>
                            <div class="tab-content" id="tab3d">
                                <div id="atom3dContainer" style="width: 100%; height: 100%;"></div>
                            </div>
                        </div>
                        
                        <!-- Propriedades -->
                        <ul class="properties-list" id="propertiesList">
                            <!-- Propriedades ser√£o preenchidas dinamicamente -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Painel Inferior -->
        <div class="bottom-panel">
            <div class="legend" id="legend">
                <!-- Legenda ser√° gerada dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="elements-data.js"></script>
    <script src="atom-visualizer-2d.js"></script>
    
    <script>
        // Vari√°veis globais
        let currentElement = null;
        let atomVisualizer2D = null;
        let scene3D = null;
        let renderer3D = null;
        let camera3D = null;
        let controls3D = null;
        
        // Vari√°veis de responsividade
        let isMobile = false;
        let isLandscape = false;
        let isTablet = false;
        let currentBreakpoint = 'desktop';
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            initializeResponsive();
            generatePeriodicTable();
            generateLegend();
            initializeVisualizers();
            setupEventListeners();
        });
        
        // Inicializar sistema responsivo
        function initializeResponsive() {
            detectDevice();
            updateLayout();
            
            // Adicionar listener para mudan√ßas de orienta√ß√£o
            window.addEventListener('orientationchange', function() {
                setTimeout(() => {
                    detectDevice();
                    updateLayout();
                    handleOrientationChange();
                }, 100);
            });
            
            // Adicionar listener para redimensionamento
            window.addEventListener('resize', debounce(() => {
                detectDevice();
                updateLayout();
            }, 250));
        }
        
        // Detectar tipo de dispositivo
        function detectDevice() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const userAgent = navigator.userAgent.toLowerCase();
            
            // Detectar mobile
            isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent) || 
                      width <= 768;
            
            // Detectar tablet
            isTablet = /ipad|android(?!.*mobile)|tablet/i.test(userAgent) || 
                      (width > 768 && width <= 1024);
            
            // Detectar orienta√ß√£o
            isLandscape = width > height;
            
            // Determinar breakpoint
            if (width <= 480) {
                currentBreakpoint = 'mobile-small';
            } else if (width <= 768) {
                currentBreakpoint = 'mobile';
            } else if (width <= 1024) {
                currentBreakpoint = 'tablet';
            } else if (width <= 1440) {
                currentBreakpoint = 'desktop-small';
                } else {
                currentBreakpoint = 'desktop';
            }
            
            // Adicionar classes ao body
            document.body.className = document.body.className.replace(/device-\w+/g, '');
            document.body.classList.add(`device-${currentBreakpoint}`);
            if (isMobile) document.body.classList.add('mobile-device');
            if (isTablet) document.body.classList.add('tablet-device');
            if (isLandscape) document.body.classList.add('landscape');
            if (!isLandscape) document.body.classList.add('portrait');
        }
        
        // Atualizar layout baseado no dispositivo
        function updateLayout() {
            const sidebar = document.getElementById('sidebar');
            const tableContainer = document.querySelector('.table-container');
            const bottomPanel = document.querySelector('.bottom-panel');
            
            if (isMobile) {
                // Mobile: sidebar sempre oculta por padr√£o
                sidebar.classList.add('collapsed');
                sidebar.classList.add('mobile-sidebar');
                tableContainer.classList.add('mobile-layout');
                bottomPanel.classList.add('mobile-layout');
                
                // For√ßar orienta√ß√£o landscape em mobile
                if (!isLandscape) {
                    showOrientationPrompt();
                }
            } else {
                // Desktop/Tablet: remover classes mobile e garantir posi√ß√£o inicial √† esquerda
                sidebar.classList.remove('mobile-sidebar');
                sidebar.classList.remove('right-position');
                tableContainer.classList.remove('mobile-layout');
                tableContainer.classList.remove('sidebar-right');
                bottomPanel.classList.remove('mobile-layout');
                bottomPanel.classList.remove('sidebar-right');
            }
        }
        
        // Lidar com mudan√ßa de orienta√ß√£o
        function handleOrientationChange() {
            if (isMobile) {
                if (isLandscape) {
                    hideOrientationPrompt();
                    // Ajustar visualiza√ß√µes 3D para landscape
                    if (renderer3D && camera3D) {
                        const container = document.getElementById('atom3dContainer');
                        if (container) {
                            const rect = container.getBoundingClientRect();
                            camera3D.aspect = rect.width / rect.height;
                            camera3D.updateProjectionMatrix();
                            renderer3D.setSize(rect.width, rect.height);
                        }
                    }
                } else {
                    showOrientationPrompt();
                }
            }
        }
        
        // Mostrar prompt de orienta√ß√£o
        function showOrientationPrompt() {
            let prompt = document.getElementById('orientation-prompt');
            if (!prompt) {
                prompt = document.createElement('div');
                prompt.id = 'orientation-prompt';
                prompt.innerHTML = `
                    <div class="orientation-content">
                        <div class="orientation-icon">üì±</div>
                        <h3>Gire seu dispositivo</h3>
                        <p>Para uma melhor experi√™ncia, use o modo paisagem (landscape)</p>
                        <div class="orientation-arrow">‚Üª</div>
                    </div>
                `;
                document.body.appendChild(prompt);
            }
            prompt.style.display = 'flex';
        }
        
        // Esconder prompt de orienta√ß√£o
        function hideOrientationPrompt() {
            const prompt = document.getElementById('orientation-prompt');
            if (prompt) {
                prompt.style.display = 'none';
            }
        }
        
        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Configurar event listeners
        function setupEventListeners() {
            // Listener para mudan√ßas de visibilidade (fullscreen)
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden && isMobile) {
                    setTimeout(() => {
                        detectDevice();
                        updateLayout();
                    }, 100);
                        }
                    });
                }
                
        // Gerar tabela peri√≥dica
        function generatePeriodicTable() {
            const table = document.getElementById('periodicTable');
            table.innerHTML = '';
            
            // Usar grid com r√≥tulos para todas as resolu√ß√µes
            // 10 linhas (1 header + 7 per√≠odos + 2 s√©ries)
            // Usar grid sem espa√ßos vazios entre indicadores e elementos
            const grid = Array(10).fill().map(() => Array(19).fill(null));
            
            // Mapear elementos para o grid
            elementsData.forEach(element => {
                if (element.row && element.col) {
                    if (element.row <= 7) {
                        grid[element.row][element.col] = element;
                    } else if (element.row === 8) {
                        // Lantan√≠deos na linha 8 (come√ßando da coluna 4)
                        const lanthanideCol = element.number - 57 + 4; // La=57 come√ßa na coluna 4
                        if (lanthanideCol <= 18) {
                            grid[8][lanthanideCol] = element;
                        }
                    } else if (element.row === 9) {
                        // Actin√≠deos na linha 9 (come√ßando da coluna 4)
                        const actinideCol = element.number - 89 + 4; // Ac=89 come√ßa na coluna 4
                        if (actinideCol <= 18) {
                            grid[9][actinideCol] = element;
                        }
                    }
                }
            });
            
            const fragment = document.createDocumentFragment();

            // Definir grupos e suas nomenclaturas
            const groupLabels = [
                '', // Espa√ßo vazio no canto
                { new: '1', old: '1A' },    // Grupo 1
                { new: '2', old: '2A' },    // Grupo 2
                { new: '3', old: '3B' },    // Grupo 3
                { new: '4', old: '4B' },    // Grupo 4
                { new: '5', old: '5B' },    // Grupo 5
                { new: '6', old: '6B' },    // Grupo 6
                { new: '7', old: '7B' },    // Grupo 7
                { new: '8', old: '8B' },    // Grupo 8
                { new: '9', old: '8B' },    // Grupo 9 (tamb√©m 8B)
                { new: '10', old: '8B' },   // Grupo 10 (tamb√©m 8B)
                { new: '11', old: '1B' },   // Grupo 11
                { new: '12', old: '2B' },   // Grupo 12
                { new: '13', old: '3A' },   // Grupo 13
                { new: '14', old: '4A' },   // Grupo 14
                { new: '15', old: '5A' },   // Grupo 15
                { new: '16', old: '6A' },   // Grupo 16
                { new: '17', old: '7A' },   // Grupo 17
                { new: '18', old: '8A' }    // Grupo 18
            ];
            
            // Criar grid com legendas (7 per√≠odos + 2 s√©ries)
            for (let row = 0; row < 10; row++) {
                for (let col = 0; col < 19; col++) {
                    let elementDiv = document.createElement('div');
                    
                    // Primeira linha - legendas de grupos
                    if (row === 0) {
                        if (col === 0) {
                            elementDiv.className = 'empty-space';
                        } else {
                            elementDiv.className = 'group-label';
                            const groupInfo = groupLabels[col];
                            elementDiv.innerHTML = `
                                <div>${groupInfo.new}</div>
                                <div class="old-notation">${groupInfo.old}</div>
                            `;
                        }
                    }
                    // Primeira coluna - legendas de per√≠odos
                    else if (col === 0) {
                        elementDiv.className = 'period-label';
                        if (row <= 7) {
                            elementDiv.innerHTML = `<div class="period-number">${row}</div>`;
                        } else if (row === 8) {
                            elementDiv.innerHTML = `<div class="period-number">Ln</div>`;
                        } else if (row === 9) {
                            elementDiv.innerHTML = `<div class="period-number">An</div>`;
                        }
                    }
                    // C√©lulas dos elementos
                    else {
                        const element = grid[row][col];
                        
                        if (element) {
                            elementDiv.className = `element ${element.category}`;
                            elementDiv.setAttribute('data-category', element.category);
                            elementDiv.innerHTML = `
                                <div class="number">${element.number}</div>
                                <div class="symbol">${element.symbol}</div>
                                <div class="name">${element.name}</div>
                                <div class="mass">${element.mass}</div>
                            `;
                            
                            elementDiv.addEventListener('click', () => selectElement(element));
                        } else {
                            elementDiv.className = 'element empty-space';
                            
                            // Indicadores de lantan√≠deos e actin√≠deos
                            if (row === 6 && col === 3) {
                                elementDiv.innerHTML = '<div class="symbol">57-71</div><div class="name">Lantan√≠deos</div>';
                                elementDiv.className = 'element lanthanide-indicator';
                                // Remover espa√ßos vazios entre o indicador e os elementos lantan√≠deos
                                if (col === 3) {
                                    for (let i = 4; i <= 18; i++) {
                                        if (!grid[row][i]) {
                                            grid[row][i] = 'occupied'; // Marcar como ocupado para evitar espa√ßos vazios
                                        }
                                    }
                                }
                            } else if (row === 7 && col === 3) {
                                elementDiv.innerHTML = '<div class="symbol">89-103</div><div class="name">Actin√≠deos</div>';
                                elementDiv.className = 'element actinide-indicator';
                                // Remover espa√ßos vazios entre o indicador e os elementos actin√≠deos
                                if (col === 3) {
                                    for (let i = 4; i <= 18; i++) {
                                        if (!grid[row][i]) {
                                            grid[row][i] = 'occupied'; // Marcar como ocupado para evitar espa√ßos vazios
                                        }
                                    }
                                }
                            } else if (grid[row][col] === 'occupied') {
                                // N√£o criar elemento para c√©lulas marcadas como ocupadas
                                continue;
                            }
                        }
                    }
                    
                    fragment.appendChild(elementDiv);
                }
            }
            
            table.appendChild(fragment);
        }
        
        
        // Obter classe CSS da categoria
        function getCategoryClass(category) {
            const categoryMap = {
                'alkali-metal': 'alkali-metal',
                'alkaline-earth-metal': 'alkaline-earth-metal',
                'transition-metal': 'transition-metal',
                'post-transition-metal': 'post-transition-metal',
                'metalloid': 'metalloid',
                'nonmetal': 'nonmetal',
                'halogen': 'halogen',
                'noble-gas': 'noble-gas',
                'lanthanide': 'lanthanide',
                'actinide': 'actinide'
            };
            return categoryMap[category] || 'nonmetal';
        }
        
        // Selecionar elemento
        function selectElement(element) {
            currentElement = element;
            updateElementInfo(element);
            updateVisualizations(element);
            
            // Destacar elemento selecionado
            document.querySelectorAll('.element').forEach(el => el.classList.remove('highlight'));
            const elementInTable = document.querySelector(`[data-category="${element.category}"]`);
            if (elementInTable && elementInTable.textContent.includes(element.symbol)) {
                elementInTable.classList.add('highlight');
            }
        }
        
        // Atualizar informa√ß√µes do elemento
        function updateElementInfo(element) {
            // Atualizar elemento visual da sidebar
            const sidebarElement = document.getElementById('sidebarElement');
            sidebarElement.className = `sidebar-element ${element.category}`;
            
            document.getElementById('sidebarElementNumber').textContent = element.number;
            document.getElementById('sidebarElementSymbol').textContent = element.symbol;
            document.getElementById('sidebarElementName').textContent = element.name;
            document.getElementById('sidebarElementMass').textContent = element.mass;
            
            document.getElementById('categoryName').textContent = getCategoryName(element.category);
            
            const colorDot = document.getElementById('categoryColor');
            colorDot.className = `color-dot ${getCategoryClass(element.category)}`;
            
            // Atualizar propriedades
            const propertiesList = document.getElementById('propertiesList');
            propertiesList.innerHTML = `
                <li><span class="property-label">Massa at√¥mica:</span><span class="property-value">${element.mass} u</span></li>
                <li><span class="property-label">Configura√ß√£o eletr√¥nica:</span><span class="property-value">${element.config}</span></li>
                <li><span class="property-label">Estado:</span><span class="property-value">${element.state}</span></li>
                <li><span class="property-label">Densidade:</span><span class="property-value">${element.density}</span></li>
                <li><span class="property-label">Ponto de fus√£o:</span><span class="property-value">${element.melting}</span></li>
                <li><span class="property-label">Ponto de ebuli√ß√£o:</span><span class="property-value">${element.boiling}</span></li>
                <li><span class="property-label">Raio at√¥mico:</span><span class="property-value">${element.atomicRadius}</span></li>
                <li><span class="property-label">Eletronegatividade:</span><span class="property-value">${element.electronegativity}</span></li>
                <li><span class="property-label">Energia de ioniza√ß√£o:</span><span class="property-value">${element.ionizationEnergy}</span></li>
                <li><span class="property-label">NOX comum:</span><span class="property-value">${element.commonNox}</span></li>
                <li><span class="property-label">Ano de descoberta:</span><span class="property-value">${element.discoveryYear}</span></li>
            `;
        }
        
        // Obter nome da categoria
        function getCategoryName(category) {
            const categoryNames = {
                'alkali-metal': 'Metal Alcalino',
                'alkaline-earth-metal': 'Metal Alcalino-terroso',
                'transition-metal': 'Metal de Transi√ß√£o',
                'post-transition-metal': 'Metal P√≥s-transi√ß√£o',
                'metalloid': 'Metaloide',
                'nonmetal': 'N√£o Metal',
                'halogen': 'Halog√™nio',
                'noble-gas': 'G√°s Nobre',
                'lanthanide': 'Lantan√≠deo',
                'actinide': 'Actin√≠deo'
            };
            return categoryNames[category] || 'Desconhecido';
        }
        
        // Gerar legenda
        function generateLegend() {
            const legend = document.getElementById('legend');
            const categories = [
                { class: 'alkali-metal', name: 'Metal Alcalino' },
                { class: 'alkaline-earth-metal', name: 'Metal Alcalino-terroso' },
                { class: 'transition-metal', name: 'Metal de Transi√ß√£o' },
                { class: 'post-transition-metal', name: 'Metal P√≥s-transi√ß√£o' },
                { class: 'metalloid', name: 'Metaloide' },
                { class: 'nonmetal', name: 'N√£o Metal' },
                { class: 'halogen', name: 'Halog√™nio' },
                { class: 'noble-gas', name: 'G√°s Nobre' },
                { class: 'lanthanide', name: 'Lantan√≠deo' },
                { class: 'actinide', name: 'Actin√≠deo' }
            ];
            
            categories.forEach(category => {
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.innerHTML = `
                    <div class="legend-color ${category.class}"></div>
                    <span>${category.name}</span>
                `;
                legend.appendChild(item);
            });
        }
        
        // Inicializar visualizadores
        function initializeVisualizers() {
            // Inicializar visualizador 3D
            initialize3DVisualizer();
        }
        
        // Inicializar visualizador 3D
        function initialize3DVisualizer() {
            const container = document.getElementById('atom3dContainer');
            
            // Limpar container
            container.innerHTML = '';
            
            // Obter dimens√µes do container
            const rect = container.getBoundingClientRect();
            const width = rect.width || 280;
            const height = rect.height || 260;
            
            // Cena
            scene3D = new THREE.Scene();
            scene3D.background = new THREE.Color(0xf0f2f5);
            
            // C√¢mera responsiva
            const fov = isMobile ? 75 : 60; // FOV maior para mobile
            camera3D = new THREE.PerspectiveCamera(fov, width/height, 0.1, 1000);
            camera3D.position.set(0, 0, isMobile ? 8 : 6); // Mais distante no mobile
            camera3D.lookAt(0, 0, 0);
            
            // Renderer responsivo
            renderer3D = new THREE.WebGLRenderer({ 
                antialias: !isMobile, // Desabilitar antialiasing no mobile para performance
                alpha: true,
                powerPreference: isMobile ? "low-power" : "high-performance"
            });
            renderer3D.setSize(width, height);
            renderer3D.setPixelRatio(isMobile ? 1 : window.devicePixelRatio); // Pixel ratio fixo no mobile
            renderer3D.shadowMap.enabled = !isMobile; // Desabilitar sombras no mobile
            if (!isMobile) {
                renderer3D.shadowMap.type = THREE.PCFSoftShadowMap;
            }
            container.appendChild(renderer3D.domElement);
            
            // Controles responsivos
            controls3D = new THREE.OrbitControls(camera3D, renderer3D.domElement);
            controls3D.enableDamping = true;
            controls3D.dampingFactor = isMobile ? 0.1 : 0.08;
            controls3D.autoRotate = false;
            controls3D.enableZoom = true;
            controls3D.enablePan = false;
            controls3D.minDistance = isMobile ? 4 : 3;
            controls3D.maxDistance = isMobile ? 20 : 15;
            controls3D.maxPolarAngle = Math.PI;
            controls3D.minPolarAngle = 0;
            
            // Configura√ß√µes espec√≠ficas para touch
            if (isMobile) {
                controls3D.touches = {
                    ONE: THREE.TOUCH.ROTATE,
                    TWO: THREE.TOUCH.DOLLY_PAN
                };
                controls3D.enableRotate = true;
                controls3D.rotateSpeed = 0.5;
                controls3D.zoomSpeed = 0.5;
            }
            
            // Ilumina√ß√£o melhorada
            const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
            scene3D.add(ambientLight);
            
            const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight1.position.set(5, 5, 5);
            directionalLight1.castShadow = true;
            directionalLight1.shadow.mapSize.width = 2048;
            directionalLight1.shadow.mapSize.height = 2048;
            scene3D.add(directionalLight1);
            
            const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.3);
            directionalLight2.position.set(-5, -5, -5);
            scene3D.add(directionalLight2);
            
            const pointLight = new THREE.PointLight(0xffffff, 0.5, 100);
            pointLight.position.set(0, 0, 10);
            scene3D.add(pointLight);
            
            // Adicionar plano de fundo sutil
            const backgroundGeometry = new THREE.SphereGeometry(20, 32, 32);
            const backgroundMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xf8f9fa, 
                transparent: true, 
                opacity: 0.1,
                side: THREE.BackSide
            });
            const background = new THREE.Mesh(backgroundGeometry, backgroundMaterial);
            scene3D.add(background);
            
            // Anima√ß√£o
            animate3D();
        }
        
        // Atualizar visualiza√ß√µes
        function updateVisualizations(element) {
            create2DAtom(element);
            update3DVisualization(element);
        }
        
        // Atualizar visualiza√ß√£o 3D
        function update3DVisualization(element) {
            if (!scene3D) return;
            
            // Limpar objetos existentes
            scene3D.children.slice().forEach(child => {
                if (child.type !== 'AmbientLight' && child.type !== 'DirectionalLight') {
                    scene3D.remove(child);
                }
            });
            
            // Criar modelo at√¥mico 3D simplificado
            createAtomicModel3D(element);
        }
        
        // Criar modelo at√¥mico 3D
        function createAtomicModel3D(element) {
            // Criar grupo principal para o √°tomo
            const atomGroup = new THREE.Group();
            scene3D.add(atomGroup);
            
            // N√∫cleo com tamanho proporcional e cor baseada na categoria
            const nucleusSize = Math.max(0.2, Math.min(0.4, 0.25 + element.number / 300));
            const nucleusGeometry = new THREE.SphereGeometry(nucleusSize, 32, 32);
            const nucleusMaterial = new THREE.MeshPhongMaterial({ 
                color: getElementColor3D(element.category),
                shininess: 100,
                emissive: new THREE.Color(getElementColor3D(element.category)).multiplyScalar(0.1),
                specular: new THREE.Color(0xffffff)
            });
            const nucleus = new THREE.Mesh(nucleusGeometry, nucleusMaterial);
            atomGroup.add(nucleus);
            
            // Adicionar efeito de pulso ao n√∫cleo
            nucleus.userData.pulsePhase = 0;
            
            // Criar camadas eletr√¥nicas baseadas na configura√ß√£o real
            const electronShells = getElectronShells(element.number);
            const electronObjects = [];
            
            electronShells.forEach((shell, shellIndex) => {
                if (shell.electrons === 0) return;
                
                const radius = 0.8 + shellIndex * 0.6;
                const electrons = shell.electrons;
                
                // Criar √≥rbita visual
                const orbitGeometry = new THREE.RingGeometry(radius - 0.05, radius + 0.05, 64);
                const orbitMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x333333, 
                    transparent: true, 
                    opacity: 0.3,
                    side: THREE.DoubleSide
                });
                const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                orbit.rotation.x = Math.PI / 2;
                atomGroup.add(orbit);
                
                // Distribuir el√©trons na √≥rbita
                for (let i = 0; i < electrons; i++) {
                    const angle = (i / electrons) * Math.PI * 2;
                    const x = Math.cos(angle) * radius;
                    const z = Math.sin(angle) * radius;
                    
                    const electronGeometry = new THREE.SphereGeometry(0.08, 16, 16);
                    const electronMaterial = new THREE.MeshPhongMaterial({ 
                        color: 0x4A90E2,
                        emissive: new THREE.Color(0x4A90E2).multiplyScalar(0.2),
                        shininess: 50
                    });
                    const electron = new THREE.Mesh(electronGeometry, electronMaterial);
                    
                    electron.position.set(x, 0, z);
                    electron.userData.originalAngle = angle;
                    electron.userData.radius = radius;
                    electron.userData.shellIndex = shellIndex;
                    electron.userData.rotationSpeed = 1.1 - shellIndex * 0.2;
                    
                    atomGroup.add(electron);
                    electronObjects.push(electron);
                }
            });
            
            // Armazenar refer√™ncias para anima√ß√£o
            atomGroup.userData.electrons = electronObjects;
            atomGroup.userData.nucleus = nucleus;
            
            // Adicionar rota√ß√£o autom√°tica
            atomGroup.userData.autoRotate = true;
            atomGroup.userData.rotationSpeed = 0.3;
        }
        
        // Fun√ß√£o para obter cores dos elementos por categoria
        function getElementColor3D(category) {
            const colors = {
                'alkali-metal': 0xf1b200,
                'alkaline-earth-metal': 0xeada00,
                'transition-metal': 0xeb8e8e,
                'post-transition-metal': 0xa2c7d3,
                'metalloid': 0x4db6ac,
                'nonmetal': 0xa1d344,
                'halogen': 0x70cbeb,
                'noble-gas': 0x74b9ff,
                'lanthanide': 0x90e3e9,
                'actinide': 0xdcadd6
            };
            return colors[category] || 0x888888;
        }
        
        // Fun√ß√£o para calcular camadas eletr√¥nicas baseada no n√∫mero at√¥mico
        function getElectronShells(atomicNumber) {
            const shells = [
                { name: 'K', max: 2, electrons: 0 },
                { name: 'L', max: 8, electrons: 0 },
                { name: 'M', max: 18, electrons: 0 },
                { name: 'N', max: 32, electrons: 0 },
                { name: 'O', max: 32, electrons: 0 },
                { name: 'P', max: 18, electrons: 0 },
                { name: 'Q', max: 8, electrons: 0 }
            ];
            
            let remaining = atomicNumber;
            for (let i = 0; i < shells.length && remaining > 0; i++) {
                const electrons = Math.min(remaining, shells[i].max);
                shells[i].electrons = electrons;
                remaining -= electrons;
            }
            
            return shells;
        }
        
        // Anima√ß√£o 3D
        function animate3D() {
            requestAnimationFrame(animate3D);
            
            if (controls3D) {
                controls3D.update();
            }
            
            // Animar √°tomos na cena
            if (scene3D) {
                scene3D.children.forEach(child => {
                    if (child.userData && child.userData.electrons) {
                        animateAtom(child);
                    }
                });
            }
            
            if (renderer3D && scene3D && camera3D) {
                renderer3D.render(scene3D, camera3D);
            }
        }
        
        // Animar √°tomo individual
        function animateAtom(atomGroup) {
            const time = Date.now() * 0.001;
            
            // Rota√ß√£o do grupo principal
            if (atomGroup.userData.autoRotate) {
                atomGroup.rotation.y += atomGroup.userData.rotationSpeed * 0.01;
            }
            
            // Animar el√©trons
            if (atomGroup.userData.electrons) {
                atomGroup.userData.electrons.forEach(electron => {
                    const speed = electron.userData.rotationSpeed;
                    const radius = electron.userData.radius;
                    const newAngle = electron.userData.originalAngle + time * speed;
                    
                    electron.position.x = Math.cos(newAngle) * radius;
                    electron.position.z = Math.sin(newAngle) * radius;
                    
                    // Efeito de pulsa√ß√£o sutil
                    const pulse = 1 + Math.sin(time * 2 + electron.userData.shellIndex) * 0.1;
                    electron.scale.setScalar(pulse);
                });
            }
            
            // Efeito de pulso no n√∫cleo
            if (atomGroup.userData.nucleus) {
                const nucleus = atomGroup.userData.nucleus;
                nucleus.userData.pulsePhase += 0.05;
                const pulse = 1 + Math.sin(nucleus.userData.pulsePhase) * 0.05;
                nucleus.scale.setScalar(pulse);
            }
        }
        
        // Alternar abas
        function switchTab(tab) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchTab('${tab}')"]`).classList.add('active');
            document.getElementById(`tab${tab}`).classList.add('active');
            
            // Se mudou para a aba 2D e h√° um elemento selecionado, recriar a visualiza√ß√£o
            if (tab === '2d' && currentElement) {
                setTimeout(() => {
                    create2DAtom(currentElement);
                }, 50);
            }
            
            // Se mudou para a aba 3D, garantir que est√° inicializada
            if (tab === '3d') {
                if (!scene3D || !renderer3D) {
                    setTimeout(() => {
                        initialize3DVisualizer();
                        if (currentElement) {
                            update3DVisualization(currentElement);
                        }
                    }, 50);
                } else if (currentElement) {
                    setTimeout(() => {
                        update3DVisualization(currentElement);
                    }, 50);
                }
            }
        }
        
        // Alternar sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const tableContainer = document.querySelector('.table-container');
            const bottomPanel = document.querySelector('.bottom-panel');
            
            if (isMobile) {
                // Comportamento mobile: apenas abrir/fechar
                if (sidebar.classList.contains('collapsed')) {
                    sidebar.classList.remove('collapsed');
                    sidebar.classList.add('open');
                } else {
                    sidebar.classList.add('collapsed');
                    sidebar.classList.remove('open');
                }
            } else {
                // Comportamento desktop/tablet: alternar posi√ß√£o
                if (sidebar.classList.contains('collapsed')) {
                    sidebar.classList.remove('collapsed');
                    return;
                }
                
                if (sidebar.classList.contains('right-position')) {
                    // Mover para a esquerda (posi√ß√£o padr√£o)
                    sidebar.classList.remove('right-position');
                    tableContainer.classList.remove('sidebar-right');
                    bottomPanel.classList.remove('sidebar-right');
                } else {
                    // Mover para a direita
                    sidebar.classList.add('right-position');
                    tableContainer.classList.add('sidebar-right');
                    bottomPanel.classList.add('sidebar-right');
                }
            }
        }
        
        // Fun√ß√£o para criar visualiza√ß√£o 2D (baseada no index.html)
        function create2DAtom(element) {
            const container = document.getElementById('atom-container-2d');
            
            // Destruir visualizador anterior se existir
            if (atomVisualizer2D) {
                atomVisualizer2D.destroy();
                atomVisualizer2D = null;
            }
            
            // Verificar se o container existe
            if (!container) {
                console.error("Container atom-container-2d n√£o encontrado");
                return;
            }
            
            try {
                // Criar novo visualizador
                atomVisualizer2D = new AtomVisualizer2D('atom-container-2d');
                atomVisualizer2D.setElement(element.number);
            } catch (error) {
                console.error("Erro ao criar visualizador 2D:", error);
            }
        }
        
        // Selecionar elemento inicial
        setTimeout(() => {
            const firstElement = elementsData[0]; // Hidrog√™nio
            selectElement(firstElement);
        }, 1000);
    </script>
</body>
</html>
